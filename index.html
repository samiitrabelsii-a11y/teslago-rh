<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proc√©dure RH 001 - Guide Interactif | Teslago Construction</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; background-color: #f8fafc; color: #334155; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin: 0 auto; height: 300px; max-height: 400px; }
        .step-content { transition: all 0.3s ease-in-out; }
        .active-step { border-left-color: #0f172a; background-color: #f1f5f9; }
        .slider-thumb::-webkit-slider-thumb { appearance: none; width: 20px; height: 20px; background: #0f172a; border-radius: 50%; cursor: pointer; }
        .typing-dot { animation: typing 1.4s infinite ease-in-out both; height: 6px; width: 6px; border-radius: 50%; background-color: #cbd5e1; display: inline-block; margin: 0 1px; }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes typing { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }
    </style>
</head>
<body class="bg-slate-50">

    <!-- NAVIGATION -->
    <nav class="bg-slate-900 text-white sticky top-0 z-50 shadow-lg">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <i class="fas fa-building text-orange-500 text-xl"></i>
                <div>
                    <h1 class="font-bold text-lg leading-tight">TESLAGO RH</h1>
                    <p class="text-xs text-slate-400">Proc√©dure 001 v2.0</p>
                </div>
            </div>
            <div class="hidden md:flex gap-6 text-sm font-medium">
                <a href="#daily-flow" class="hover:text-orange-400 transition">Le Quotidien</a>
                <a href="#simulator" class="hover:text-orange-400 transition">Simulateur</a>
                <a href="#bonuses" class="hover:text-orange-400 transition">Bonus & Sanctions</a>
                <a href="#ai-assistant" class="text-orange-400 hover:text-white transition flex items-center gap-1"><i class="fas fa-robot"></i> IA Expert</a>
            </div>
            <div class="md:hidden text-orange-500"><i class="fas fa-bars"></i></div>
        </div>
    </nav>

    <!-- HERO SECTION -->
    <header class="bg-white border-b border-slate-200">
        <div class="container mx-auto px-4 py-12 md:py-20 text-center max-w-4xl">
            <div class="inline-block px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-bold mb-4">
                ENTR√âE EN VIGUEUR : 29 D√âCEMBRE 2025
            </div>
            <h2 class="text-3xl md:text-5xl font-bold text-slate-900 mb-6">Gestion du Temps & Pointage</h2>
            <p class="text-lg text-slate-600 mb-8 leading-relaxed">
                Bienvenue sur le guide interactif de la nouvelle proc√©dure RH. 
                Ce syst√®me automatis√© garantit la transparence de votre paie et valorise votre temps de travail.
                <br><strong>Votre matricule (CAD-XXX) est votre cl√©. Votre pointage est votre responsabilit√©.</strong>
            </p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-left max-w-3xl mx-auto">
                <div class="bg-slate-50 p-4 rounded-lg border border-slate-100">
                    <i class="fas fa-robot text-blue-600 mb-2"></i>
                    <h3 class="font-bold text-slate-800">100% Automatis√©</h3>
                    <p class="text-sm text-slate-500">Aucune intervention humaine. Pas de pointage = Pas de salaire.</p>
                </div>
                <div class="bg-slate-50 p-4 rounded-lg border border-slate-100">
                    <i class="fas fa-user-clock text-green-600 mb-2"></i>
                    <h3 class="font-bold text-slate-800">Autonomie</h3>
                    <p class="text-sm text-slate-500">Vous g√©rez votre solde de cong√©s via vos bonus d'activit√©.</p>
                </div>
                <div class="bg-slate-50 p-4 rounded-lg border border-slate-100">
                    <i class="fas fa-balance-scale text-orange-600 mb-2"></i>
                    <h3 class="font-bold text-slate-800">√âquit√©</h3>
                    <p class="text-sm text-slate-500">Les r√®gles sont les m√™mes pour tous (Sfax, Tunis, Chantiers).</p>
                </div>
            </div>
        </div>
    </header>

    <!-- SECTION 1: DAILY FLOW -->
    <section id="daily-flow" class="py-16 container mx-auto px-4 max-w-5xl">
        <div class="mb-10 text-center">
            <h2 class="text-2xl font-bold text-slate-900 mb-2">Le Rituel Quotidien</h2>
            <p class="text-slate-600">Cliquez sur chaque √©tape pour comprendre quand utiliser l'application.</p>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-start">
            <div class="space-y-4">
                <div class="step-card bg-white p-5 rounded-lg shadow-sm border-l-4 border-slate-200 cursor-pointer hover:bg-slate-50 transition" onclick="showStep(1)">
                    <div class="flex justify-between items-center">
                        <div class="flex items-center gap-3"><div class="w-8 h-8 rounded-full bg-green-100 text-green-700 flex items-center justify-center font-bold">1</div><h3 class="font-bold text-slate-800">Matin : Prise de Poste</h3></div>
                        <i class="fas fa-chevron-right text-slate-300"></i>
                    </div>
                </div>
                <div class="step-card bg-white p-5 rounded-lg shadow-sm border-l-4 border-slate-200 cursor-pointer hover:bg-slate-50 transition" onclick="showStep(2)">
                    <div class="flex justify-between items-center">
                        <div class="flex items-center gap-3"><div class="w-8 h-8 rounded-full bg-orange-100 text-orange-700 flex items-center justify-center font-bold">2</div><h3 class="font-bold text-slate-800">Midi : Pause D√©jeuner</h3></div>
                        <i class="fas fa-chevron-right text-slate-300"></i>
                    </div>
                </div>
                <div class="step-card bg-white p-5 rounded-lg shadow-sm border-l-4 border-slate-200 cursor-pointer hover:bg-slate-50 transition" onclick="showStep(3)">
                    <div class="flex justify-between items-center">
                        <div class="flex items-center gap-3"><div class="w-8 h-8 rounded-full bg-blue-100 text-blue-700 flex items-center justify-center font-bold">3</div><h3 class="font-bold text-slate-800">Sortie Personnelle</h3></div>
                        <i class="fas fa-chevron-right text-slate-300"></i>
                    </div>
                </div>
                <div class="step-card bg-white p-5 rounded-lg shadow-sm border-l-4 border-slate-200 cursor-pointer hover:bg-slate-50 transition" onclick="showStep(4)">
                    <div class="flex justify-between items-center">
                        <div class="flex items-center gap-3"><div class="w-8 h-8 rounded-full bg-red-100 text-red-700 flex items-center justify-center font-bold">4</div><h3 class="font-bold text-slate-800">Soir : Fin de Journ√©e</h3></div>
                        <i class="fas fa-chevron-right text-slate-300"></i>
                    </div>
                </div>
            </div>
            <div id="step-detail-container" class="bg-white p-8 rounded-xl shadow-lg border border-slate-100 h-full flex flex-col justify-center">
                <div class="text-center text-slate-400">
                    <i class="fas fa-hand-pointer text-4xl mb-4"></i>
                    <p>S√©lectionnez une √©tape √† gauche pour voir les consignes.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION 2: SIMULATOR -->
    <section id="simulator" class="bg-slate-900 text-white py-16">
        <div class="container mx-auto px-4 max-w-6xl">
            <div class="mb-10 text-center">
                <span class="text-orange-400 font-bold tracking-wider text-xs uppercase">Comprendre l'Algorithme</span>
                <h2 class="text-3xl font-bold mt-2">Simulateur de Journ√©e</h2>
                <p class="text-slate-400 mt-2 max-w-2xl mx-auto">Le syst√®me calcule votre statut automatiquement selon vos heures. Testez diff√©rents sc√©narios.</p>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-1 bg-slate-800 p-6 rounded-xl border border-slate-700">
                    <div class="mb-6">
                        <label class="block text-sm font-bold mb-2 text-slate-300">R√©gime Contrat</label>
                        <select id="sim-regime" class="w-full bg-slate-900 border border-slate-600 rounded p-2 text-white" onchange="updateSimulation()">
                            <option value="full">Plein Temps (Obj: 8h)</option>
                            <option value="part">Mi-Temps (Obj: 4h)</option>
                        </select>
                    </div>
                    <div class="mb-8">
                        <label class="block text-sm font-bold mb-2 text-slate-300">Heures Travaill√©es : <span id="sim-hours-display" class="text-orange-400">8.0</span>h</label>
                        <input type="range" id="sim-hours" min="0" max="12" step="0.5" value="8" class="w-full h-2 bg-slate-600 rounded-lg appearance-none cursor-pointer slider-thumb" oninput="updateSimulation()">
                        <div class="flex justify-between text-xs text-slate-500 mt-1"><span>0h</span><span>4h</span><span>6h</span><span>8h</span><span>12h</span></div>
                    </div>
                    <div class="mb-4 space-y-3">
                        <label class="flex items-center gap-3 cursor-pointer"><input type="checkbox" id="sim-pause-perso" class="w-5 h-5 rounded bg-slate-700 border-slate-500 text-orange-500" onchange="updateSimulation()"><span class="text-sm">Pause Perso Point√©e ?</span></label>
                        <label class="flex items-center gap-3 cursor-pointer"><input type="checkbox" id="sim-weekend" class="w-5 h-5 rounded bg-slate-700 border-slate-500 text-orange-500" onchange="updateSimulation()"><span class="text-sm">Dimanche ou F√©ri√© ?</span></label>
                    </div>
                </div>
                <div class="lg:col-span-2 bg-white rounded-xl text-slate-900 p-6 flex flex-col items-center justify-center relative overflow-hidden">
                    <div id="sim-result-badge" class="absolute top-4 right-4 text-xs font-bold px-3 py-1 rounded-full bg-gray-200 text-gray-600">SIMULATION</div>
                    <div class="text-center w-full max-w-md">
                        <div id="sim-icon" class="text-6xl mb-4 text-green-500 transition-all duration-300 transform scale-100"><i class="fas fa-check-circle"></i></div>
                        <h3 id="sim-status-title" class="text-2xl font-bold mb-2">Journ√©e Valid√©e</h3>
                        <p id="sim-status-desc" class="text-slate-600 mb-6">Vous avez atteint votre objectif journalier.</p>
                        <div class="bg-slate-50 rounded-lg p-4 border border-slate-100 w-full">
                            <div class="flex justify-between items-center mb-2 border-b border-slate-200 pb-2"><span class="text-sm text-slate-500">Qualification</span><span id="sim-qualif" class="font-bold text-slate-800">PR√âSENCE NORMALE</span></div>
                            <div class="flex justify-between items-center mb-2 border-b border-slate-200 pb-2"><span class="text-sm text-slate-500">Impact Paie</span><span id="sim-pay" class="font-bold text-green-600">100% Pay√©</span></div>
                            <div class="flex justify-between items-center"><span class="text-sm text-slate-500">Impact Cong√©</span><span id="sim-bonus" class="font-bold text-slate-800">-</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION 3: BONUSES -->
    <section id="bonuses" class="py-16 container mx-auto px-4 max-w-5xl">
        <div class="mb-12 text-center"><h2 class="text-3xl font-bold text-slate-900">Le Syst√®me de M√©rite</h2></div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
            <div class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-red-500">
                <div class="flex items-center gap-3 mb-4"><div class="bg-red-100 p-2 rounded-lg text-red-600"><i class="fas fa-gavel"></i></div><h3 class="font-bold text-lg">La R√®gle des 3 Permissions</h3></div>
                <p class="text-sm text-slate-600 mb-6 text-justify">Accumulation de retards ou de d√©parts anticip√©s (moins de 6h de travail) d√©clenche une sanction automatique.</p>
                <div class="bg-slate-50 p-4 rounded-lg border border-slate-200">
                    <div class="flex justify-between text-xs font-bold text-slate-400 mb-2"><span>Permission 1</span><span>Permission 2</span><span>Permission 3</span></div>
                    <div class="flex gap-2 h-8"><div class="flex-1 bg-yellow-400 rounded opacity-50"></div><div class="flex-1 bg-yellow-400 rounded opacity-50"></div><div class="flex-1 bg-red-500 rounded text-center text-white text-xs font-bold leading-8">-1 JOUR</div></div>
                </div>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-green-500">
                <div class="flex items-center gap-3 mb-4"><div class="bg-green-100 p-2 rounded-lg text-green-600"><i class="fas fa-gift"></i></div><h3 class="font-bold text-lg">Acquisition de Bonus</h3></div>
                <ul class="space-y-3">
                    <li class="flex items-start gap-3"><i class="fas fa-check text-green-500 mt-1"></i><div><span class="font-bold text-slate-800">Week-end & F√©ri√©</span><p class="text-xs text-slate-500">+1 Jour de Cong√© si travaill√©.</p></div></li>
                    <li class="flex items-start gap-3"><i class="fas fa-check text-green-500 mt-1"></i><div><span class="font-bold text-slate-800">Interventions & R√©unions</span><p class="text-xs text-slate-500">Bonus si hors horaires (env. 1j/3 √©vts).</p></div></li>
                </ul>
            </div>
        </div>
        <div class="bg-white p-6 rounded-xl shadow border border-slate-100"><h3 class="font-bold text-lg mb-4 text-center">Simulation : Potentiel de Cong√©s Annuel</h3><div class="chart-container"><canvas id="bonusChart"></canvas></div></div>
    </section>

    <!-- SECTION NEW: AI ASSISTANT -->
    <section id="ai-assistant" class="bg-gradient-to-r from-slate-900 to-slate-800 py-16 text-white border-t border-slate-700">
        <div class="container mx-auto px-4 max-w-4xl">
            <div class="flex items-center justify-center gap-3 mb-8"><span class="text-2xl">‚ú®</span><h2 class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-orange-300 to-orange-500">Assistant RH Intelligent</h2><span class="text-2xl">‚ú®</span></div>
            <p class="text-center text-slate-300 mb-8 max-w-2xl mx-auto">Un doute sur une r√®gle ? L'IA Expert Teslago conna√Æt la proc√©dure 001 par c≈ìur.</p>
            <div class="bg-slate-800 rounded-xl p-6 border border-slate-600 shadow-2xl">
                <div class="flex flex-col space-y-4">
                    <div class="flex gap-2 justify-center flex-wrap mb-2">
                        <button onclick="setPrompt('J\'ai oubli√© de pointer ce matin, est-ce grave ?')" class="px-3 py-1 bg-slate-700 hover:bg-slate-600 rounded-full text-xs transition border border-slate-500">ü§î Oubli de pointage</button>
                        <button onclick="setPrompt('Combien de jours de cong√©s je gagne si je travaille dimanche ?')" class="px-3 py-1 bg-slate-700 hover:bg-slate-600 rounded-full text-xs transition border border-slate-500">üìÖ Bonus Dimanche</button>
                        <button onclick="setPrompt('R√©dige une justification pour un retard de 30min.')" class="px-3 py-1 bg-slate-700 hover:bg-slate-600 rounded-full text-xs transition border border-slate-500">‚úçÔ∏è R√©diger un justificatif</button>
                    </div>
                    <div class="relative">
                        <textarea id="ai-input" rows="3" class="w-full bg-slate-900 border border-slate-600 rounded-lg p-4 text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none resize-none placeholder-slate-500" placeholder="Posez votre question..."></textarea>
                        <button onclick="askGemini()" class="absolute bottom-3 right-3 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white px-4 py-2 rounded-lg font-bold text-sm transition shadow-lg flex items-center gap-2"><span>Envoyer</span> <i class="fas fa-paper-plane"></i></button>
                    </div>
                    <div id="ai-response-container" class="hidden mt-4">
                        <div class="flex gap-3">
                            <div class="w-8 h-8 rounded-full bg-orange-500 flex-shrink-0 flex items-center justify-center"><i class="fas fa-robot text-white text-sm"></i></div>
                            <div class="flex-1">
                                <div class="bg-slate-700 rounded-lg rounded-tl-none p-4 text-slate-100 leading-relaxed border border-slate-600 shadow-inner">
                                    <div id="ai-response-text"></div>
                                    <div id="ai-loading" class="hidden"><span class="typing-dot"></span><span class="typing-dot"></span><span class="typing-dot"></span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="bg-slate-900 text-slate-400 py-8 text-center text-sm">
        <div class="container mx-auto px-4"><p class="mb-2">TESLAGO CONSTRUCTION - DIRECTION RH</p><p>Application de la proc√©dure v2.0 √† compter du 29/12/2025.</p></div>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- ‚ö†Ô∏è IMPORTANT : REMPLACEZ CI-DESSOUS AVEC VOTRE CL√â ---
        const apiKey = "AIzaSyAA427hAPu1h7Ksp8kWpmJKYlR2HVm4Pgw"; 

        const rhContext = `Tu es l'assistant RH expert de Teslago Construction. Ta mission est d'expliquer la "Proc√©dure RH 001 - Gestion du Pointage". R√®gles : Matin "Prise de Poste" OBLIGATOIRE. Midi NE JAMAIS pointer "Pause" (1h d√©duite auto). Pauses Perso : Uniquement pour sorties hors d√©jeuner. Soir : "Fin de journ√©e" OBLIGATOIRE. Seuils : <4h = ABSENCE, <6h = PERMISSION. Sanction : 3 permissions = -1 jour cong√©. Bonus : Dimanche/F√©ri√© travaill√© = +1 jour cong√©. R√©ponds en Fran√ßais, concis et pro.`;

        async function askGemini() {
            const inputField = document.getElementById('ai-input');
            const responseContainer = document.getElementById('ai-response-container');
            const responseText = document.getElementById('ai-response-text');
            const loading = document.getElementById('ai-loading');
            const userQuestion = inputField.value.trim();
            if (!userQuestion) return;
            if (apiKey === "VOTRE_CLE_API_ICI" || apiKey === "") { alert("Erreur: Cl√© API manquante dans le fichier HTML."); return; }

            responseContainer.classList.remove('hidden');
            responseText.innerHTML = '';
            loading.classList.remove('hidden');

            const payload = {
                contents: [{ parts: [{ text: userQuestion }] }],
                systemInstruction: { parts: [{ text: rhContext }] }
            };

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                loading.classList.add('hidden');
                
                if (result.error) {
                    responseText.innerHTML = `<span class="text-red-400">Erreur : ${result.error.message}</span>`;
                } else {
                    const aiMessage = result.candidates?.[0]?.content?.parts?.[0]?.text || "Pas de r√©ponse.";
                    responseText.innerHTML = aiMessage.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\n/g, '<br>');
                }
            } catch (error) {
                loading.classList.add('hidden');
                responseText.innerHTML = `<span class="text-red-400">Erreur r√©seau : ${error.message}</span>`;
            }
        }

        function setPrompt(text) { document.getElementById('ai-input').value = text; document.getElementById('ai-input').focus(); }

        // --- DATA & INTERACTION ---
        const steps = {
            1: { title: "Matin : Prise de Poste", icon: "fa-sun", color: "text-green-600", bg: "bg-green-50", action: "üü¢ PRISE DE POSTE", desc: "√Ä faire imp√©rativement en arrivant.", warning: "Oubli = Journ√©e ABSENTE (Non pay√©e)." },
            2: { title: "Midi : D√©jeuner Standard", icon: "fa-utensils", color: "text-orange-600", bg: "bg-orange-50", action: "üö´ NE RIEN CLIQUER", desc: "1h d√©duite automatiquement.", warning: "Ne pointez pas Pause pour manger !" },
            3: { title: "Sortie Personnelle", icon: "fa-coffee", color: "text-blue-600", bg: "bg-blue-50", action: "‚òï PAUSE puis ‚ñ∂Ô∏è REPRISE", desc: "Pour absences personnelles (Banque, etc).", warning: "D√©duit du salaire." },
            4: { title: "Soir : Fin de Journ√©e", icon: "fa-moon", color: "text-red-600", bg: "bg-red-50", action: "üî¥ FIN DE JOURN√âE", desc: "Arr√™te le compteur.", warning: "Sans ce clic, journ√©e en ERREUR." }
        };

        function showStep(id) {
            const data = steps[id];
            const container = document.getElementById('step-detail-container');
            document.querySelectorAll('.step-card').forEach(el => el.classList.remove('active-step', 'border-l-slate-900'));
            document.querySelectorAll('.step-card')[id-1].classList.add('active-step', 'border-l-slate-900');
            container.innerHTML = `<div class="text-center animate-fade-in"><div class="w-16 h-16 mx-auto rounded-full ${data.bg} ${data.color} flex items-center justify-center text-2xl mb-4"><i class="fas ${data.icon}"></i></div><h3 class="text-2xl font-bold text-slate-900 mb-2">${data.title}</h3><div class="inline-block px-4 py-2 bg-slate-900 text-white font-mono rounded mb-6 shadow-lg transform scale-105">Action : ${data.action}</div><p class="text-lg text-slate-600 mb-6 leading-relaxed">${data.desc}</p><div class="bg-red-50 border-l-4 border-red-500 p-4 text-left rounded"><p class="text-red-700 font-bold text-sm"><i class="fas fa-exclamation-triangle mr-2"></i>ATTENTION</p><p class="text-red-600 text-sm mt-1">${data.warning}</p></div></div>`;
        }

        // --- SIMULATOR ---
        function updateSimulation() {
            const hours = parseFloat(document.getElementById('sim-hours').value);
            const regime = document.getElementById('sim-regime').value;
            const isWeekend = document.getElementById('sim-weekend').checked;
            const displayHours = document.getElementById('sim-hours-display');
            const icon = document.getElementById('sim-icon');
            const title = document.getElementById('sim-status-title');
            const desc = document.getElementById('sim-status-desc');
            const qualif = document.getElementById('sim-qualif');
            const pay = document.getElementById('sim-pay');
            const bonus = document.getElementById('sim-bonus');
            const badge = document.getElementById('sim-result-badge');

            displayHours.innerText = hours;
            let colorClass = "text-green-500";

            if (isWeekend) {
                if (hours > 0) { colorClass = "text-purple-500"; title.innerText = "JOUR BONUS"; desc.innerText = "Travail le Dimanche/F√©ri√© valid√©."; qualif.innerText = "BONUS WE"; pay.innerText = "Heures Pay√©es"; bonus.innerText = "+1 Jour Cong√©"; icon.innerHTML = '<i class="fas fa-gift"></i>'; badge.className = "absolute top-4 right-4 text-xs font-bold px-3 py-1 rounded-full bg-purple-100 text-purple-700"; }
                else { colorClass = "text-slate-400"; title.innerText = "Repos"; desc.innerText = "Aucun pointage."; qualif.innerText = "-"; pay.innerText = "-"; bonus.innerText = "-"; icon.innerHTML = '<i class="fas fa-bed"></i>'; }
            } else {
                if (hours < 4) { colorClass = "text-red-500"; title.innerText = "ABSENCE"; desc.innerText = "Moins de 4h travaill√©es."; qualif.innerText = "ABSENCE"; pay.innerText = "Non Pay√© (0%)"; bonus.innerText = "-"; icon.innerHTML = '<i class="fas fa-times-circle"></i>'; badge.className = "absolute top-4 right-4 text-xs font-bold px-3 py-1 rounded-full bg-red-100 text-red-700"; }
                else if (regime === 'full' && hours < 6) { colorClass = "text-yellow-500"; title.innerText = "PERMISSION AUTO"; desc.innerText = "Entre 4h et 6h."; qualif.innerText = "PERMISSION"; pay.innerText = "Pay√©"; bonus.innerText = "Attention (R√®gle des 3)"; icon.innerHTML = '<i class="fas fa-exclamation-circle"></i>'; badge.className = "absolute top-4 right-4 text-xs font-bold px-3 py-1 rounded-full bg-yellow-100 text-yellow-700"; }
                else { colorClass = "text-green-500"; title.innerText = "VALID√â"; desc.innerText = "Objectif atteint."; qualif.innerText = "PR√âSENCE"; pay.innerText = "Pay√© (100%)"; bonus.innerText = "Acquisition normale"; icon.innerHTML = '<i class="fas fa-check-circle"></i>'; badge.className = "absolute top-4 right-4 text-xs font-bold px-3 py-1 rounded-full bg-green-100 text-green-700"; }
            }
            icon.className = `text-6xl mb-4 transition-all duration-300 transform scale-100 ${colorClass}`;
        }

        document.addEventListener('DOMContentLoaded', function() {
            showStep(1);
            updateSimulation();
            const ctx = document.getElementById('bonusChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Base Annuelle', 'Bonus WE Est.', 'Bonus Interv. Est.', 'Total Potentiel'],
                    datasets: [{ label: 'Jours de Cong√©s', data: [18, 5, 3, 26], backgroundColor: ['#3b82f6', '#8b5cf6', '#10b981', '#f97316'], borderWidth: 0, borderRadius: 4 }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true, grid: { color: '#f1f5f9' } }, x: { grid: { display: false } } } }
            });
        });
    </script>
</body>
</html>
